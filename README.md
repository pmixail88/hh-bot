# ТЗ: Telegram-бот для поиска вакансий на hh.ru

## 1. Цель проекта

Создать Telegram-бота, который ищет вакансии на hh.ru по индивидуальным фильтрам пользователя, ежедневно присылает новые вакансии и позволяет генерировать адаптированное резюме и сопроводительное письмо через LLM.

---

## 2. Основной функционал

### 2.1. Регистрация пользователя

- `/start` создаёт профиль.
- Сохраняются: telegram_id, фио, город, желаемая должность, навыки, базовое резюме.

### 2.2. Настройки поиска

- `/search_settings`
- Пользователь указывает:
  - желаемая должность;
  - город;
  - минимальную зарплату;
  - удалённость (выбрать подходящие станции метро)
  - «свежесть» вакансий (1–3 дня).
  - Тип занятости (Полная занятость, Частичная, Удаленная)
  - Опыт работы (нет опыта, 1-3 года, 3-6 лет, более 6 лет)
  - Компания (Только прямые работодатели, Размер компании: малая/средняя/крупная, Только ТОП-компании)

### 2.3. Ежедневная рассылка

- Раз в сутки:
  - берутся фильтры каждого пользователя;
  - вызывается API hh.ru;
  - новые вакансии сохраняются;
  - пользователю отправляется подборка (5–10 позиций).

### 2.4. Просмотр вакансий

- `/vacancies`
- Каждая вакансия: название, компания, город, зарплата, ссылка.
- Кнопки под вакансией:
  - «Сгенерировать резюме»
  - «Сгенерировать cover letter»
  - «Неинтересно»

### 2.5. Генерация документов

- Пользователь задаёт свой LLM API:
  - Base URL
  - API Key
  - название модели
- Бот генерирует:
  - адаптированное резюме;
  - сопроводительное письмо.
- Сохраняет и отправляет пользователю.

---

## 3. Технические требования

### 3.1. Технологии

- Python 3.11+
- aiogram
- PostgreSQL (Neon)
- Асинхронный HTTP-клиент
- OpenAI-совместимый LLM endpoint

### 3.2. Архитектура

- Модули:
  - handlers
  - hh_service
  - llm_service
  - db
  - scheduler (cron/apscheduler)

### 3.3. Хранимые данные

- Пользователи
- Поисковые фильтры
- Настройки LLM
- Вакансии
- Связки «пользователь ↔ вакансия»
- Сгенерированные документы

---

## 4. Нефункциональные требования

- Логирование без утечки секретов.
- Исключение повторной рассылки тех же вакансий.
- Стабильная обработка ошибок hh.ru и LLM.
- Чистая архитектура, читаемый код.
- README и пример `.env`.
